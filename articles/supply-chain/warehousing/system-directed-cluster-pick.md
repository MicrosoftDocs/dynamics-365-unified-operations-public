---
# required metadata

title: System-directed cluster picking
description: This topic provides an overview of system-directed cluster picking in Microsoft Dynamics 365 Supply Chain Management.
author: Mirzaab
manager: tfehr
ms.date: 05/26/2020
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 

# optional metadata

ms.search.form: 
# ROBOTS: 
audience: Application User
# ms.devlang: 
ms.reviewer: kamaybac
ms.search.scope: Core, Operations, Supply Chain Management
# ms.tgt_pltfrm: 
ms.custom: 
ms.assetid: 
ms.search.region: Global
# ms.search.industry: 
ms.author: perlynne
ms.search.validFrom: 2019-12-31
ms.dyn365.ops.version: 10.0.1

---

# System-directed cluster picking

[!include [banner](../includes/banner.md)]

Cluster picking is a piece picking process that lets you pick items for multiple orders at the same time by clustering them into pick clusters. You then have to visit the pick location only one time. Typically, this functionality is used with small order picking or quantities that are less than case quantities.

When system-directed cluster picking is set up, you can cluster-pick work headers, based on a system-generated cluster. The system cluster-picks orders up to the number of positions that is specified in the cluster profile. Therefore, you can pick multiple orders at the same time without having to manually create a cluster.

System-directed cluster picking offers an alternative to manual cluster building, where a cluster profile is used to create a cluster. Several setup-related lines must be defined in the cluster profile before it's used:

- **Number of positions** corresponds to the number of orders that will be put on a cluster. Therefore, it corresponds to the number of totes.
- **Break cluster** determines when the cluster should be broken.
- **Generate cluster ID** controls whether the cluster ID will be generated by the system or entered by the user.
- **Sort verification type** determines whether position verification is required.

A new mobile device menu item is used for system-directed cluster picking. The **Cluster profile ID** must be specified for the selected **Directed by** option. Additionally, the system-directed work sequence queries can group orders based on company-specific criteria. Therefore, you can further optimize the assignment of work orders by specifying customized sorting criteria using the system-directed work sequence queries.

When system-directed cluster picking is enabled, warehouse workers are presented with a cluster where picking orders have been preassigned to cluster positions. Therefore, workers can start to pick an item for multiple work orders by visiting the pick location only one time. The picking process for system-directed cluster picking is the same as the process for user-directed cluster picking.

## Enable the System-directed cluster picking feature

Before you can use this feature, it must be enabled on your system. Administrators can use the [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) page to check the feature status and enable it if needed. Here, the feature is listed as:

- **Module** - Warehouse management
- **Feature name** - System directed cluster picking

This feature also requires enabling a dependent feature. The dependent feature is:

- **Module** - Warehouse management
- **Feature name** - Organization-wide system directed work sequencing

## Set up system-directed cluster picking

### Create cluster profiles

Cluster profiles control how the system creates each cluster. If different clusters are required, a different cluster profile should be created for each mobile device menu item.

1. Go to **Warehouse management \> Setup \> Mobile device \> Cluster profiles**.
2. Select **New**.
3. In the **Cluster profile ID** field, enter **2 Position**.
4. In the **Name** field, enter **2 Position**.
5. On the **General** FastTab, enter the following information:

    - **Generate cluster ID** - Select **Yes**. This option determines whether the cluster ID is automatically created by the system, or whether the user will create it at the start of picking. 
    - **Activate positions** - Select **Yes**. This option determines whether the position names are automatically generated based on the position name setup. If this option is set to **No**, the license plate ID for the position is used.
    - **Number of positions** - Select **2**. This field determines the maximum number of positions that the cluster can have (that is, the maximum number of boxes, totes, and so on).
    - **Position name** - Select **Numeric** so that positions are named by using continuous numbers. If you select **Alphabetical**, the positions are named in alphabetical order.
    - **Break cluster at** - Select **Put**. This field determines when the cluster is broken. 
    - **Sort verification type** - Select **Position scan**. This field determines whether the put-to-position step is verified.
        
6. On the **Cluster sorting** FastTab, you define sorting criteria by creating a new line and enter the following information:

    - **Sequence number** - Select **1**. This field determines the sequence that the system sorts by. A value is entered automatically, but you can change it if needed.
    - **Field name** - Enter **WMSLocationId**. This field determines the field that the line uses for sorting criteria.
    - **Sorting** - Select **Ascending**. This field defines whether the sorting is done in ascending or descending order.

### Create a mobile device menu item

To create a new mobile device menu item for system-directed cluster picking and link the cluster profile ID to the mobile device menu item, follow these steps.

1. Go to **Warehouse management > Setup > Mobile device > Mobile device menu items**.
1. Select **New**.
1. In the header section, enter the following information:
    - **Menu item name** - SD Cluster
    - **Title** - SD Cluster
    - **Mode** - Work
    - **Use existing work** - Yes

1. On the **General** FastTab, enter the following information:
    - **Directed by** - System directed cluster picking
    - **Generate license plate** - Yes
    - **Cluster profile ID** - 2 Position

1. On the **Work classes** FastTab, set up the valid work class for this mobile device menu item by setting the following fields:
    - **Work class ID** - Sales
    - **Work order type** - Sales orders

1. In the **Mobile device menu items** Action Pane, select **System directed work sequence queries** and follow these steps to specify a new system-directed work sequence query:
    - Select **New** in the Action Pane.
    - **Sequence number** - 1
    - **Description** - Work priority â€“ Work ID

1. On the Action Pane select **Edit query**
1. Select the **Sorting** tab
1. Select **Add** to add a new line, then enter the following:
    - **Table** - Work
    - **Derived table** - Work
    - **Field** - Work priority
    - **Search direction** - Ascending
1. Select **Add** to add a second line, then enter the following:
    - **Table** - Work
    - **Derived table** - Work
    - **Field** - Work ID
    - **Search direction** - Ascending

1. The system will now sort work IDs in the cluster, first by work priority and then by work ID.

### Set up a mobile device menu

1. Go to **Warehouse management > Setup > Mobile device > Mobile device menu**.
1. Add the **SD Cluster** menu item that you just created to a Mobile device menu.
1. Select the **Outbound** menu.
1. Select **Edit** from the Action Pane.
1. Scroll until you find **SD Cluster**.
1. Select **SD Cluster**, the arrow pointing to the **Menu Structure** list will be enabled.
1. Select the **arrow** button to move the **SD Cluster** menu item into the **Outbound** menu structure.
1. Select **SD Cluster** from the **Menu Structure** list, then select the **UP** or **DOWN** arrows to move the menu item into the desired position on the mobile device menu.

## Scenario

### Create picking work

Before you can set up system-directed cluster picking, you must create eligible outbound work. The cluster profile that you created earlier specifies two cluster positions. Therefore, you must create at least two work IDs. In this scenario you will create two sales orders, reserve inventory, release the sales orders to the warehouse, and then manually process the wave.

1. Go to **Sales and Marketing > Sales orders > All sales orders**.
1. Select **New** in the Action Pane to create the first sales order.
    - The **Create sales order** menu opens, enter the following information:
        - On the **Customer** FastTab, enter **Customer account** - **US-004**.
        - On the **General** FastTab, enter **Warehouse** - **62**.
        - Select **OK** to close the menu and create the sales order.
    - On the **Sales order lines** FastTab, select **Add line** if a new line is not automatically added and enter the following:
        - **Item number** - A0001
        - **Quantity** - 1
        - Select **Add line** to add a second line.
        - **Item number** - A0002
        - **Quantity** - 3
    - Reserve inventory for both of the lines that you just created.
        - Select **Line 1**.
        - On the **Sales order lines** Action Pane, select **Inventory**, and then select **Reservation** from the list.
        - On the **Reservation** form, select **Reserve lot** to reserve the inventory.
        - Close the **Reservation** form when the reservation is completed.
        - Repeat these steps to reserve inventory for **Line 2**.
1. Select **New** in the Action Pane to create the second sales order
    - The **Create sales order** menu opens, enter the following information:
        - On the **Customer** FastTab, enter **Customer account** - **US-005**.
        - On the **General** FastTab, enter **Warehouse** - **62**.
        - Select **OK** to close the menu and create the sales order
    - On the **Sales order lines** FastTab, select **Add line** if a new line is not automatically added and enter the following information:
        - **Item number** - A0001
        - **Quantity** - 4
        - Select **Add line** to add a second line.
        - **Item number** - A0002
        - **Quantity** - 2
    - Reserve inventory for both lines that you just created.
        - Select **Line 1**.
        - On the **Sales order lines** Action Pane, select **Inventory**, and then select **Reservation** from the list.
        - On the **Reservation** form, select **Reserve lot** to reserve the inventory.
        - Close the **Reservation** form when the reservation is completed.
        - Repeat these steps to reserve inventory for **Line 2**.
    - Close the sales order and return to the **All sales orders** list page.
1. Find the two sales orders you just created (you may need to refresh the page). In the table, select both sales orders using the section check mark.
    - In the **All sales orders** Action Pane, select the **Warehouse** tab.
    - In the **Actions** group, select **Release to warehouse** to release both sales orders to the warehouse.
1. When the release to warehouse process is completed, an informational message will be displayed.
    - Shipments will be created for each sales order.
    - A wave will be created and both shipments will be assigned to the wave. Make note of the **Wave ID**.
1. Go to **Warehouse management > Outbound waves > Shipment waves > All waves**.
    - In the **All waves** list find and select the **Wave ID** that you created in the previous step.
    - In the Action Pane, select the **Wave** tab,
    - In the **Wave** group, select **Process** to process the wave and create **Work**.
    - Informational messages will be generated when processing has been completed,  indicating that work has been created and the wave has been posted.
1. **Optional**: Go to **Warehouse management > Work > Work details** to view the work created. Two different work IDs are created. Each work ID has two pick lines.

### Run the mobile device flow

1. Sign in to the mobile device for a user in warehouse **62**.
1. On the **Main Menu**, select **Outbound**.
1. On the **Outbound** menu, select **SD Cluster** to initiate the pick.
    - A cluster is created, and the two work IDs that you created earlier are attached. If you created more than two work IDs, only the first two are added to the cluster. Notice that the work IDs are added to the cluster in ascending order, as you specified in the query setup.

    > [!NOTE]
    > The new cluster is automatically created only if enough additional work IDs were previously created. Otherwise, the following message is shown: "Not enough work can be found for cluster."

    - After you select the menu, the first pick screen appears. The system aggregates all matching pick lines from the two work IDs and directs you to visit the pick location one time, so that you can satisfy both orders by using one pick. This process is done in the same way as the process for user-directed cluster picking.

1. Confirm the first picking location and item by selecting **OK**.
    - The quantity of the pick will be the total of the item displayed on the sales orders in the cluster.
1. Enter the position name (Numeric or Alphabetical) to confirm that the item quantity picked for the position were put in the correct position.
1. Repeat this process until all item quantities have been picked and put in the correct position.
1. The last step on the mobile device is to **Put** the cluster in the final location. Select **OK**
    - When the put operation is confirmed, the cluster is closed and broken, based on the value that you set for the **Break cluster at** field in the cluster profile. Work IDs are also closed.
1. A "Cluster complete" message is shown on the mobile device.

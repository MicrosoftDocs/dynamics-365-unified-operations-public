---
# required metadata

title: Service electronic fiscal document for Brazil
description: This topic provides an overview of the service electronic fiscal document.
author: ShylaThompson
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 

# optional metadata

ms.search.form: BrazilParameters, ConfDefGroups_BR, ConfDefGroupWizard_BR, ConfDefLayout_BR, ConfExportDialog_BR, FiscalDocumentType_BR, RPSExport_BR, RPSImport_BR, TaxServiceCode_BR
# ROBOTS: 
audience: Application User
# ms.devlang: 
# ms.reviewer: 81
ms.search.scope: Operations, Core
# ms.tgt_pltfrm: 
ms.custom: 269984
ms.assetid: 46e40a3a-784f-4a1e-b185-c4b8ad63518f
ms.search.region: Brazil
# ms.search.industry: 
ms.author: sndray
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611

---

# Electronic fiscal document for services

This topic provides an overview of the service electronic fiscal document.

When a fiscal document is about service in Brazil, different rules apply than a regular electronic fiscal document. The model for a services fiscal document in Brazil is SE and includes ISS, PIS, and COFINS taxes.
[![Service fiscal document](./media/ServiceFiscalDocument.png)](./media/ServiceFiscalDocument.png) 

## Recibo Provisorio de Servicos (RPS) document
When a company issues a service fiscal document, depending on the city where the invoice was issued, some rules and formats may apply. For example, in Sao Paulo city, the service fiscal document is issued as a temporary service invoice or RPS. That document becomes an official service electronic fiscal document when it is approved by the city tax authority. After it is approved, the company issues an official service electronic fiscal document.

## RPS file
All cities in Brazil have their own service communication (integration) and format layout. There is not a standardized method of communication and format. For this reason, the current Brazilian localization uses an example of the layout of Sao Paulo city. To generate a RPS file, generate the following files:

-   An outgoing file that includes one or more service fiscal documents with an Open status (RPS).
-   An incoming file where the original file is returned but includes the official invoice number assigned by the city tax authority.

### RPS with configurator

The Configurator tool manages the method of payment file formats for electronic payments and electronic fiscal documents for services. To set up the Configurator, follow these steps:

-   Create configurator definition groups and layout groups for the file formats.
-   Export or import the layout groups.
-   Export data from definition groups or layout groups by using the Configurator export utility.

You can create a definition group by defining the tables and fields that are used to configure the layout for the export or import process. You can then create a layout group that defines the file structure used to import or export data. A definition group must be attached to a layout group. The Configurator can be used to generate outgoing and incoming files that update the existing service fiscal document.

### RPS with electronic reporting

An RPS outgoing file can be generated by using electronic reporting, where each .txt file format is defined by using an specific model and format designer for electronic reporting. These configurations can be imported into the current company to generate XML files on the **Repositories** page. You can also import these configurations from Lifecycle Services (LCS) under the **Shared asset library** and **Asset type** = **GER Configurations**. The following repository models and formats must be uploaded:

-   Services fiscal document model (model configuration)
-   RPS Sao Paulo V.002 (BR) (format configuration)

After the repository is available, on the **Brazilian parameters** page, in **Electronic reporting**, select **Type =** **NFeServices**. The model details represent the set of services for fiscal document transactions. On the **Fiscal documents type** page, you can identify the format file. Select the **Electronic fiscal document for services** option, and in the **Export format mapping** field, select **ER configuration format** . **Note**: This configuration applies when an outgoing RPS file needs to be generated. You can use the existing model and create another format to fulfill the requirements from other cities not supported in the current Brazilian localization.

## Prerequisites
#### Service code configuration

On the **Service code** page, you can configure the related service code required for the majority city tax authority. A service code is mandatory when a fiscal document type that has model = **SE** is posted. In addition, you can configure a specific service code per country/region, state, and city because classification can be different in cities.

#### Services on delivery address

You may need to consider the delivery address for the correct service taxation instead of the default address. In those cases, on the **Sales Order** page, under the **Fiscal Information** group, in the **Service code on delivery address** field, enter the delivery address.

## Export and import RPS files
On the **RPS export and import** page, you can generate outgoing and incoming RPS files. You create the file to send to the fiscal authority to process all emitted RPS documents to become valid electronic services fiscal documents. After processing, you get a file to import. After the file is imported, the original documents are updated to reflect the correct status of all RPS and electronic services fiscal documents.

#### Export

On the **Export RPS file** page, enter the following information.

-   **From date** - Enter the start date of the period for which the RPS files will be exported.
-   **To date** - Enter the end date of the period for which the RPS files will be exported.
-   **From customer** - Select the first customer account number in the range of customer accounts to include.
-   **To customer** - Select the last customer account number in the range of customer accounts to include.
-   **From RPS** - Enter the first invoice number in the range of invoices.
-   **To RPS** - Enter the last invoice number in the range of invoices.
-   **Fiscal establishment ID** - Select the identifier of the fiscal establishment.
-   **Fiscal document type** - Select the type of fiscal document.
-   Select the **Include previously exported RPS** option to include an RPS file that was already processed.
-   Click **OK** to export the RPS file.

When you export an RPS file, a text file is generated based on the export file layout group that is selected in the **Export file layout group** field or the **Export format mapping** field on the **Fiscal document types** page for the selected fiscal document type.

#### Import

On the **Import RPS file** page, enter the following information:

-   **Fiscal establishment ID** - Select the fiscal establishment to import the electronic fiscal document for services for.
-   **Fiscal document type** - Select the fiscal document type for the electronic fiscal document for services.

When you import an electronic fiscal document for services, information about the electronic fiscal document for services, such as the RPS import date, fiscal document number, fiscal document date, and validation number, is updated based on the return file layout group that is specified in the **Return file layout group** field on the **Fiscal document types** page.

